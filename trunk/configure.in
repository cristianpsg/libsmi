#
# configure.in --
#
#      Process this file with autoconf to produce a configure script.
#
# Copyright (c) 1999 Frank Strauss, Technical University of Braunschweig.
#
# This program is free software; you can redistribute it and/or
# modify it under the terms of the GNU General Public License
# as published by the Free Software Foundation; either version 2
# of the License, or (at your option) any later version.
#
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU General Public License for more details.
# 
# You should have received a copy of the GNU General Public License
# along with this program; if not, write to the Free Software
# Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
#
# @(#) $Id: configure.in,v 1.3 1999/05/25 17:00:25 strauss Exp $
#

AC_INIT(tools/smilint.c)
AM_INIT_AUTOMAKE(libsmi,0.1)

AC_DEFINE(BACKEND_SMI)

AC_ARG_WITH(cflags,
[  --with-cflags=FLAGS     use FLAGS for CFLAGS],
CFLAGS="$withval")

AC_ARG_ENABLE(sming,
[  --enable-sming          enable SMIng support],
AC_DEFINE(BACKEND_SMING))

FLEX=flex
BISON=bison

AC_PROG_CC
AC_EXEEXT
AC_PROG_INSTALL
AC_PROG_MAKE_SET
AC_PROG_RANLIB
#AC_LIBTOOL_DLOPEN
AM_PROG_LIBTOOL
AC_SUBST(LIBTOOL_DEPS)

if ${CONFIG_SHELL} ./libtool --features | grep "enable static" >/dev/null; then
  STATIC=-static
else
  STATIC=
fi
AC_SUBST(STATIC)

dnl Checks for header files.
AC_HEADER_STDC
AC_CHECK_HEADERS(fcntl.h limits.h malloc.h strings.h unistd.h)

dnl Checks for typedefs, structures, and compiler characteristics.
AC_C_CONST
AC_TYPE_OFF_T
AC_TYPE_SIZE_T
AC_STRUCT_TM

dnl Checks for library functions.
AC_FUNC_VPRINTF
AC_CHECK_FUNCS(mktime putenv strcspn strdup strerror strstr strtod strtol strtoul)

AC_SUBST(CC)
#AC_SUBST(RANLIB)
AC_SUBST(CFLAGS)
#AC_SUBST(DEFS)
AC_SUBST(BISON)
AC_SUBST(FLEX)

AC_OUTPUT(Makefile lib/Makefile tools/Makefile)
